<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>.NET Standard Selector</title>

        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/css/bootstrap.min.css" />
<meta name="x-stylesheet-fallback-test" content="" class="sr-only" /><script>!function(a,b,c,d){var e,f=document,g=f.getElementsByTagName("SCRIPT"),h=g[g.length-1].previousElementSibling,i=f.defaultView&&f.defaultView.getComputedStyle?f.defaultView.getComputedStyle(h):h.currentStyle;if(i&&i[a]!==b)for(e=0;e<c.length;e++)f.write('<link href="'+c[e]+'" '+d+"/>")}("position","absolute",["\/lib\/bootstrap\/dist\/css\/bootstrap.min.css"], "rel=\u0022stylesheet\u0022 ");</script>

    <style>
        .targetable {
            background: green;
            color: white;
        }

        .targetable a {
            color: white;            
        }
    </style>

</head>
<body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">.NET Standard</a>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="https://github.com/terrajobst/netstandard-versions">GitHub</a></li>
                    <li><a href="https://aka.ms/netstandardfaq">FAQ</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container body-content">
        <h2>About.</h2>

        <table id="versiontable" class="table">
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th colspan="8" style="padding-bottom: 30px;">
                        <div id="line-back" style="background: #bdd7ee; padding: 5px;">
                        </div>
                        <div id="line" class="bg-primary" style="padding: 5px;">
                        </div>
                        <div id="line-text" style="color: white; padding: 5px;">
                            Available API Set
                        </div>
                    </th>
                </tr>
                <tr class="platform-row">
                    <th>.NET Standard</th>
                    <th><select /></th>
                    <th style="text-align:center">1.0</th>
                    <th style="text-align:center">1.1</th>
                    <th style="text-align:center">1.2</th>
                    <th style="text-align:center">1.3</th>
                    <th style="text-align:center">1.4</th>
                    <th style="text-align:center">1.5</th>
                    <th style="text-align:center">1.6</th>
                    <th style="text-align:center">2.0</th>
                    <th style="text-align:center">2.1</th>
                </tr>
            </thead>
            <tbody>
                <tr class="platform-row">
                    <th>.NET Core</th>
                    <td><select /></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center">1.0</td>
                    <td align="center">2.0</td>
                    <td align="center">3.0</td>
                </tr>
                <tr class="platform-row">
                    <th>.NET Framework</th>
                    <td><select /></td>
                    <td align="center"></td>
                    <td align="center">4.5</td>
                    <td align="center">4.5.1</td>
                    <td align="center">4.6</td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center">4.6.1</td>
                    <td align="center"></td>
                </tr>
                <tr class="platform-row">
                    <th>Mono</th>
                    <td><select /></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center">4.6</td>
                    <td align="center">5.4</td>
                    <td align="center">6.2</td>
                </tr>
                <tr class="platform-row">
                    <th>Xamarin.iOS</th>
                    <td><select /></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center">10.0</td>
                    <td align="center">10.14</td>
                    <td align="center">12.12</td>
                </tr>
                <tr class="platform-row">
                    <th>Xamarin.Android</th>
                    <td><select /></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center">7.0</td>
                    <td align="center">8.0</td>
                    <td align="center">9.3</td>
                </tr>
                <tr class="platform-row">
                    <th>Unity</th>
                    <td><select /></td>                
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center">2018.1</td>
                    <td align="center">TBD</td>
                </tr>
                <tr class="platform-row">
                    <th>Universal Windows Platform</th>
                    <td><select /></td>
                    <td align="center"></td>
                    <td align="center">8.0</td>
                    <td align="center">8.1</td>
                    <td align="center"></td>
                    <td align="center">10.0</td>
                    <td align="center"></td>
                    <td align="center"></td>
                    <td align="center">10.0.16299</td>
                    <td align="center">TBD</td>
                </tr>
            </tbody>
        </table>

        <div class="checkbox" style="visibility: collapse;">
          <label><input id="platformCheckbox" type="checkbox" value="">Enable advanced selection</label>
        </div>

        <div class="embed-responsive embed-responsive-16by9 col-xs-12 text-center">
            <iframe class="text-center" width="560" height="315" src="https://www.youtube.com/embed/vMRSlQ5modg" frameborder="0" allowfullscreen></iframe>
        </div>
        
        <hr />
        <footer>
            <p>&copy; Immo Landwerth</p>
        </footer>
    </div>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-2.2.0.min.js" crossorigin="anonymous" integrity="sha384-K+ctZQ+LL8q6tP7I94W+qzQsfRV2a+AfHIi9k8z8l9ggpc8X+Ytst4yBo/hH+8Fk">
        </script>
<script>(window.jQuery||document.write("\u003Cscript src=\u0022\/lib\/jquery\/dist\/jquery.min.js\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha384-K\u002BctZQ\u002BLL8q6tP7I94W\u002BqzQsfRV2a\u002BAfHIi9k8z8l9ggpc8X\u002BYtst4yBo\/hH\u002B8Fk\u0022\u003E\u003C\/script\u003E"));</script>
        <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.7/bootstrap.min.js" crossorigin="anonymous" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa">
        </script>
<script>(window.jQuery && window.jQuery.fn && window.jQuery.fn.modal||document.write("\u003Cscript src=\u0022\/lib\/bootstrap\/dist\/js\/bootstrap.min.js\u0022 crossorigin=\u0022anonymous\u0022 integrity=\u0022sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\u0022\u003E\u003C\/script\u003E"));</script>


        <script type="text/javascript">

            $(function(){

                function getColumn(cell) {
                    return cell.closest("tr").children().index(cell) - 2;
                }

                function getRow(cell) {
                    var row = cell.closest("tr");
                    var offset = 0;
                    var isHeader = row.parent().is("tbody");
                    if (isHeader) {
                        var headerCount = row.parent().prev().children().length;
                        offset = headerCount;
                    }

                    return row.parent().children().index(row) + offset - 1;
                }

                function updateApiChart() {

                    var apiCounts = [
                        7949,
                        10239,
                        10285,
                        13122,
                        13140,
                        13355,
                        13501,
                        32638,
                        35849
                    ];

                    var netstandardSelector = $("#versiontable").find("select:first");
                    var index = netstandardSelector.prop("selectedIndex");
                    var apiCount = apiCounts[index];
                    var maxApi = Math.max(...apiCounts);
                    var percentage = apiCount / maxApi;

                    var table = $("#versiontable");
                    var tableTop = table.position().top;
                    var tableLeft = table.position().left;
                    var tableWidth = table.width();

                    var firstColumn = table.find("tr:first").children().slice(2).first();
                    var firstColumnLeft = firstColumn.position().left;

                    var columnWidth = tableWidth - firstColumnLeft + tableLeft;

                    var height = 30;
                    var left = firstColumnLeft;
                    var top = tableTop;
                    var width = columnWidth * percentage;

                    $('#line').css({'width':width, 'height':height, 'left':left, 'top':top, 'position':'absolute'});
                    $('#line-back').css({'width':columnWidth, 'height':height, 'left':left, 'top':top, 'position':'absolute'});
                    $('#line-text').css({'width':columnWidth, 'height':height, 'left':left, 'top':top, 'position':'absolute'});
                }

                function recomputePlatformVersions() {
                    var netstandardSelector = $("#versiontable").find("select:first");
                    var index = netstandardSelector.prop("selectedIndex");
                    $("#versiontable tr.platform-row").each(function() {
                        var selector = $(this).find("select:first");

                        var foundMinimumVersion = false;

                        var lastCellWithContent = getColumn($(this).find("td, th").slice(2).filter(function() {
                            return $(this).text() != "";
                        }).last());

                        $(this).find("td, th").slice(2).each(function() {
                            var text = $(this).text();
                            var col = getColumn($(this));

                            if (col <= lastCellWithContent)
                            {
                                if (col < index) {
                                    $(this).attr("class","danger");
                                    $(this).css("background", "").css("color", "");
                                }
                                else if (foundMinimumVersion) {
                                    $(this).attr("class","success");
                                    $(this).css("background", "").css("color", "");
                                } else {
                                    if (text != "") {
                                        if (selector != netstandardSelector)
                                            selector.val(text);
                                        foundMinimumVersion = true;
                                    }

                                    $(this).attr("class", "targetable");
                                }
                            }
                        });

                        if (selector != netstandardSelector && !foundMinimumVersion)
                            selector.val("");
                    });
                }

                function recomputeNetStandardVersion() {

                    var effectiveVersion = $("#versiontable tbody>tr:first td").length - 2;

                    $("#versiontable tbody>tr").each(function() {
                        var row = $(this);
                        var selector = row.find("select:first");
                        var selectedValue = selector.val();
                        var columnIndex = row.find("td, th").slice(2).filter(function() {
                            return $(this).text() == selectedValue && selectedValue != "";
                        }).first().prevAll().length;
                        var maxNetstandardVersion = columnIndex - 2;
                        if (maxNetstandardVersion >= 0 && effectiveVersion > maxNetstandardVersion)
                            effectiveVersion = maxNetstandardVersion;
                    });

                    var netstandardSelector = $("#versiontable").find("select:first");
                    var currentNetStandardVersion = netstandardSelector.prop("selectedIndex");

                    if (currentNetStandardVersion != effectiveVersion) {
                        netstandardSelector.prop("selectedIndex", effectiveVersion);
                        recomputePlatformVersions();
                        updateApiChart();
                    }
                }

                $(window).on("resize", function(){
                    updateApiChart();
                });

                $("#versiontable tr.platform-row").each(function() {
                    var selector = $(this).find("select:first");
                    var selectorRow = getRow(selector);
                    if (selectorRow == 0) {
                        selector.change(function() {
                            recomputePlatformVersions();
                            updateApiChart();
                        });
                    }
                    else {
                        selector.change(function() {
                            recomputeNetStandardVersion();
                        });
                        selector.append($("<option></option>")
                                            .attr("value", "")
                                            .text("N/A"));
                        selector.hide();
                    }

                    selector.width("75px");

                    $(this).find("td, th").slice(2).each(function() {
                        var text = $(this).text();
                        if (text != "") {
                            selector.append($("<option></option>")
                                                .attr("value", text)
                                                .text(text + "+"));
                        }

                        if (selectorRow == 0) {
                            $(this).wrapInner("<a href='https://github.com/dotnet/standard/blob/master/docs/versions/netstandard" + text + ".md'>");
                        }
                    });
                });

                $("#platformCheckbox").change(function() {
                    var isChecked = $(this).is(":checked");
                    $("#versiontable tr").each(function() {
                        var selector = $(this).find("select:first");
                        if (getRow(selector) > 0) {
                            if (isChecked)
                                selector.show();
                            else
                                selector.hide();
                        }
                    });
                });

                function setNetstandardVersion(value) {
                    var netstandardSelector = $("#versiontable").find("select:first");
                    netstandardSelector.val(value);
                    recomputePlatformVersions();
                    updateApiChart();
                }

                setNetstandardVersion("2.0");
            });
        </script>

</body>
</html>
